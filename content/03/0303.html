<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>重抽样 | Practical Statistics For Data Scientists</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/pachygrapsus-crassipes/assets/css/0.styles.a7f43921.css" as="style"><link rel="preload" href="/pachygrapsus-crassipes/assets/js/app.46ba7b70.js" as="script"><link rel="preload" href="/pachygrapsus-crassipes/assets/js/2.e15c1d5f.js" as="script"><link rel="preload" href="/pachygrapsus-crassipes/assets/js/21.4812917c.js" as="script"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/10.c41cb2f6.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/11.518a09d2.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/12.fbd571a3.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/13.26590ea9.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/14.23c99481.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/15.1d1b0f58.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/16.c3288bbe.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/17.2d9250f7.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/18.0ba2a19f.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/19.ca53c35b.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/20.b4323985.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/22.dab79e70.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/23.b1cd130c.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/24.378e2d22.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/25.f5b1741e.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/26.de07873d.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/27.66bc012e.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/28.9ede57b6.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/29.adf7ca87.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/3.1d40b5f1.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/30.1cb601a1.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/31.477c5c5e.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/32.4fb4a3a1.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/33.a6a15cc3.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/34.5777d836.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/35.64719835.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/36.460c4fdc.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/37.caade764.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/38.2ede932b.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/39.402948dc.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/4.ff5eda02.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/5.0aecd9bb.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/6.ec29b9af.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/7.7d20c928.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/8.daf92891.js"><link rel="prefetch" href="/pachygrapsus-crassipes/assets/js/9.da495518.js">
    <link rel="stylesheet" href="/pachygrapsus-crassipes/assets/css/0.styles.a7f43921.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/pachygrapsus-crassipes/" class="home-link router-link-active"><!----> <span class="site-name">Practical Statistics For Data Scientists</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.github.com/sunnnychan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.github.com/sunnnychan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/pachygrapsus-crassipes/content/" class="sidebar-link">内容摘录</a></li><li><a href="/pachygrapsus-crassipes/r/" class="sidebar-link">R演示代码</a></li><li><a href="/pachygrapsus-crassipes/cover/" class="sidebar-link">封面说明</a></li><li><a href="/pachygrapsus-crassipes/author/" class="sidebar-link">作者简介</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="重抽样"><a href="#重抽样" class="header-anchor">#</a> 重抽样</h1> <p>在统计学中，重抽样是指从观测数据中反复地抽取数据值，目标是评估一个统计量中的随机变异性。</p> <p>重抽样还可用于评估并提高一些机器学习模型的准确性。<br>
例如，对于使用多个自助数据集构建的决策树模型，可以通过 Bagging 过程计算其平均值，参见 6.3 节。</p> <ul><li>重抽样过程主要有两种类型：</li></ul> <p>自助法 ：自助法用于评估一个估计量的可靠性，我们在前面已经做了介绍(参见 2.4 节)。<br>
置换检验 ： 本节将介绍用于检验假设的置换检验，它通常涉及两组或多组。</p> <ul><li><p>主要术语</p></li> <li><ul><li>置换检验</li></ul></li></ul> <p>将两组或多组样本组合在一起，并将观测值随机地(或穷尽地)重新分配给重抽样。
同义词：随机化检验、随机置换检验、准确检验</p> <ul><li><ul><li>有放回，无放回</li></ul></li></ul> <p>在抽样时，所抽取的元素在下一次抽取前是否放回样本中。</p> <h2 id="_3-3-1-置换检验-permutation-test"><a href="#_3-3-1-置换检验-permutation-test" class="header-anchor">#</a> 3.3.1 置换检验 Permutation Test</h2> <p>置换过程涉及两组或多组样本，通常是 A/B 测试或其他假设检验中的组。<br>
置换意味着改变一组值的顺序。</p> <p>要对一个假设进行置换检验，
首先要将从 A 组和 B 组(当然还可以包括其他组，例如 C、D......)中得到的结果组合在一起。<br>
这就是零假设的逻辑，即无论处理指定给哪个组，都是无差别的。</p> <p>然后，我们从组合集中随机抽取出各个组，并查看组间的差异情况，实现对假设的检验。</p> <ul><li>置换过程如下</li></ul> <ol><li>将各个组得出的结果组合为一个数据集</li> <li>对组合得到的数据做随机混洗<br>
然后从中随机抽取(有放回)一个规模与 A 组相同的重抽样样本。</li> <li>在余下的数据中，随机抽取(无放回)一个规模与 B 组相同的重抽样样本</li> <li>如果还有 C 组、D 组甚至更多的组，执行同样的操作</li> <li>无论对原始样本计算的是哪一种统计量或估计量(例如，组比例差异)<br>
现在对重抽样进行重新计算，并记录结果。这构成了一次置换迭代。</li> <li>重复上述步骤 R 次，生成检验统计量的置换分布。</li></ol> <p>现在我们回头查看所观测到的组间差异，并与置换差异进行对比。</p> <p>如果观测到的差异位于置换差异内，那么置换检验的结果并不能证实任何事情。<br>
因为观测到的差异落在偶然可能产生之差异的范围内。</p> <p>但是，如果观测到的差异大部分落在置换分布之外，那么我们就可 以得出“与偶然性无关”这一结论。<br>
如果使用专业术语描述，我们称差异是统计显著的(参见 3.4 节)。</p> <h2 id="_3-3-2-例子-web黏性"><a href="#_3-3-2-例子-web黏性" class="header-anchor">#</a> 3.3.2 例子:Web黏性</h2> <p>有一家公司提供较高价格的服务，现在，该公司想要测试两种 Web 显示，以确定哪一种能带来更高的销售额。<br>
由于该公司提供的服务价格较高，因此销量并不大，而且销售周期很长。</p> <p>要想确定哪种 Web 显示的效果更好，该公司需要很长的时间才能积累到足够多的销售数据。
鉴于此，该公司决定使用一种<strong>代理变量</strong>来度量结果，并使用详细描述公司服务的内部页面替代。</p> <ul><li>代理变量</li></ul> <p>是一种可以代表我们所关注的真正变量的变量，真正关注的变量可能不可用，也可能度量的成本太高或耗时过长。<br>
例如，在气候研究中，远古冰芯的含氧量被用作温度的代理变量。<br>
最好至少有一点关于真正变量的数据，这样可以评估真正变量与代理变量间的关联程度。</p> <p>在本例中，一个潜在的代理变量是着陆页上的点击数。当然，更好的代理变量是访问者在页面上停留的时间。<br>
可以认为，如果一个 Web 显示页面能吸引人们关注更长的时间，那么它就可能会带来更高的销售额。<br>
因此，我们这里所采用的度量是页面 A 与页面 B 的平均会话时间。</p> <p>由于检验中所使用的 Web 页面是内部专用的，因此并不会有大量的访问者。<br>
另外应注意的是，我们使用了 Google Analytics(GA) 工具测定会话时间，但是 GA 无法测定访问者上次访问的会话时间。<br>
不过，GA 并不从数据中删除该会话，而是将记录置为零，因此我们需要对数据做一些额外的处理，以从数据中删除这些会话。</p> <p>基于此，我们就两种不同的 Web 显示合计得到了 36 个会话，其中页面 A 的会话为 21 个，页面 B 的会话为 15 个。</p> <p>为了直观地比较会话时间，我们使用 ggplot 实现了箱线图的并排绘制。</p> <p><img src="http://pic.yupoo.com/sunnnychan/aa1b4dc0/7ad9eb95.png" alt=""></p> <p>图中显示了页面 B 具有比页面 A 更长的会话时间，平均比页面 A 高出约 35.7 秒。</p> <p>但问题在于，这一差距是否落在随机性可能生成的范围内，即是否是统计显著的。</p> <p>要回答这一问题，一种方法是应用置换检验，将所有会话时间组合在一起，然后反复做随机混洗。<br>
再将数据分为一个具有 21 个 观测值的组(页面 A，n = 21) 和一个具有 15 个观测值的组(页面 B，n = 15)。</p> <p>我们实现了一个进行置换检验的函数，该函数可以将 36 个会话时间随机分配给一个具有 21 个元素的组(页面 A)和一个具有 15 个元素的组(页面 B)。<br>
该函数的工作原理是，无放回地抽样 n2 次，并分配给 B 组，余下的 n1 次抽样分配给 A 组。函数返回两组均值之间的差异。</p> <p>我们指定 n2 = 15，n1 = 21，并调用该函数 R = 1000 次，然后绘制所生成的会话时间差异分布情况的直方图。</p> <ul><li>页面 A 和页面 B 会话时间差异的频数分布</li></ul> <p><img src="http://pic.yupoo.com/sunnnychan/99a3cffa/541982c1.png" alt=""></p> <p>从图中可以看出，对于页面会话时间，随机置换的均值差异通常会超出观测到的差异(图中的垂直线)。<br>
这表明，页面 A 和页面 B 会话时间 之间的观测差异落在随机变异的范围内，因此不是统计显著的。</p> <h2 id="_3-3-3-穷尽置换检验和自助置换检验"><a href="#_3-3-3-穷尽置换检验和自助置换检验" class="header-anchor">#</a> 3.3.3 穷尽置换检验和自助置换检验</h2> <p>置换检验除了使用前面介绍的随机混洗过程(也称随机置换检验或随机检验)之外，还有两种重要变体:</p> <ul><li>穷尽(exhaustive)置换检验</li></ul> <p>穷尽置换检验并不是随机混洗并分组数据，而是尝试所有可能的分组。
穷尽置换检验<strong>只适用于规模较小的样本</strong>。</p> <p>如果做大量的重复混洗，那么随机置换检验的结果会近似于穷尽置换检验的结果，并在极限上逼近。
穷尽置换检验有时也被称为<strong>准确检验</strong>，因为其统计学属性确保了零模型不会被检验为比 α 值水平更显著(参见 3.4 节)。</p> <ul><li>自助(bootstrap)置换检验</li></ul> <p>自助置换检验是在置换检验第二步和第三步的抽取中，进行有放回抽样，而非无放回抽样。<br>
这样，重抽样过程不仅建模了随机分配对象给处理的过程，而且建模了从总体中随机抽取对象的过程。</p> <p>这两个都是统计学过程，但是它们之间的差别过于复杂，因而不被数据科学实践所关注。</p> <h2 id="_3-3-4-置换检验-数据科学的底线"><a href="#_3-3-4-置换检验-数据科学的底线" class="header-anchor">#</a> 3.3.4 置换检验:数据科学的底线</h2> <p>在探索随机变异性中，置换检验是一种十分有用的启发式过程。它很容易编码，也很容易理解和解释。<br>
针对统计学中那些基于公式的形式主义和“假决定论”，<strong>置换检验提供了切实可行的绕行方法</strong>。</p> <p>不同于依赖于统计学公式的方法，重抽样的一个优点在于给出了一种更加近乎于“万能” 的推断方法。<br>
它所适用的数据可以是数值，也可以是二元的，样本规模可以相同，也可以不同；<br>
并且无须假设数据符合正态分布。</p> <h2 id="本节要点"><a href="#本节要点" class="header-anchor">#</a> 本节要点</h2> <ol><li>置换检验将多个样本组合在一起，并做随机混洗。</li> <li>对混洗后的值做分组并重抽样，计算我们感兴趣的统计量。</li> <li>重复上述过程，并在表格中记录重抽样统计量的情况。</li> <li>对比统计量的观测值与重抽样分布，就可以判定观测到的样本间差异是否由偶然性导致的。</li></ol> <h2 id="拓展阅读"><a href="#拓展阅读" class="header-anchor">#</a> 拓展阅读</h2> <ol><li>Eugene Edgington 和 Patrick Onghena 合著的 Randomization Tests
不要过度沉溺于该书中的非随机抽样内容。</li> <li>Peter Bruce 撰写的 Introductory Statistics and Analytics: A Resampling Perspective 一书</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/pachygrapsus-crassipes/assets/js/app.46ba7b70.js" defer></script><script src="/pachygrapsus-crassipes/assets/js/2.e15c1d5f.js" defer></script><script src="/pachygrapsus-crassipes/assets/js/21.4812917c.js" defer></script>
  </body>
</html>
